# Doesn't actually work!
# node:
#  version: 8.1.4

# TODO: create env for configuring node version

machine:
  environment:
    node_version: 8.1.4
  services:
    - docker

dependencies:
  pre:
    - nvm install $node_version
    - nvm use $node_version && npm install -g npm

  override:
    - nvm use $node_version && npm install

test:
  pre:
    - nvm use $node_version && npm run assert-compiled
    - nvm use $node_version && npm run lint

  override:
    - nvm use $node_version && npm run node-full-test
    - nvm use $node_version && npm run browser-test-phantomjs
